---
title: ChromaDB Vector Database
description: Learn how to use ChromaDB with Genkit across JavaScript, Go, and Python for vector storage, semantic search, and RAG applications.
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

ChromaDB is an open-source vector database designed for AI applications. It provides efficient vector storage, similarity search, and metadata filtering capabilities. ChromaDB can run in-memory, as a standalone server, or in client/server mode, making it flexible for both development and production use.

## Installation and Setup

<Tabs syncKey="language">
  <TabItem label="JavaScript" icon="seti:javascript">
    Install the ChromaDB plugin:

    ```bash
    npm install genkitx-chromadb
    ```

    Configure the plugin when initializing Genkit:

    ```ts
    import { genkit } from 'genkit';
    import { chroma } from 'genkitx-chromadb';
    import { googleAI } from '@genkit-ai/googleai';

    const ai = genkit({
      plugins: [
        chroma([
          {
            collectionName: 'my-documents',
            embedder: googleAI.embedder('gemini-embedding-001'),
          },
        ]),
      ],
    });
    ```

    ### Configuration Options

    ```ts
    // Advanced configuration
    const ai = genkit({
      plugins: [
        chroma([
          {
            collectionName: 'my-documents',
            embedder: googleAI.embedder('gemini-embedding-001'),
            clientParams: {
              path: 'http://localhost:8000', // Custom Chroma server
              // auth: { ... }, // Authentication if needed
            },
            embedderOptions: {
              taskType: 'RETRIEVAL_DOCUMENT',
            },
          },
        ]),
      ],
    });
    ```
  </TabItem>
  <TabItem label="Go" icon="seti:go">
    For Go applications, you can use ChromaDB through the Go client:

    ```bash
    go get github.com/chroma-core/chroma/go
    ```

    ```go
    package main

    import (
        "context"
        "github.com/firebase/genkit/go/genkit"
        "github.com/firebase/genkit/go/plugins/chroma"
        "github.com/firebase/genkit/go/plugins/googleai"
    )

    func main() {
        ctx := context.Background()
        g, err := genkit.Init(ctx,
            genkit.WithPlugins(
                &googleai.GoogleAI{},
                &chroma.ChromaDB{
                    ServerURL: "http://localhost:8000",
                    Collections: []chroma.CollectionConfig{
                        {
                            Name:     "my-documents",
                            Embedder: "googleai/gemini-embedding-001",
                        },
                    },
                },
            ),
        )
        if err != nil {
            log.Fatal(err)
        }
    }
    ```
  </TabItem>
  <TabItem label="Python" icon="seti:python">
    For Python applications, install the ChromaDB client:

    ```bash
    pip install chromadb genkit-plugin-chromadb
    ```

    ```python
    from genkit.ai import Genkit
    from genkit.plugins.chromadb import ChromaDB
    from genkit.plugins.google_genai import GoogleGenAI

    ai = Genkit(
        plugins=[
            GoogleGenAI(),
            ChromaDB(
                server_url="http://localhost:8000",
                collections=[
                    {
                        "name": "my-documents",
                        "embedder": "googleai/gemini-embedding-001",
                    }
                ],
            ),
        ],
    )
    ```
  </TabItem>
</Tabs>

## Basic Usage

### Document Indexing

<Tabs syncKey="language">
  <TabItem label="JavaScript" icon="seti:javascript">
    Index documents for semantic search:

    ```ts
    import { chromaIndexerRef } from 'genkitx-chromadb';
    import { Document } from 'genkit';

    // Prepare documents for indexing
    const documents: Document[] = [
      {
        content: 'ChromaDB is an open-source vector database for AI applications.',
        metadata: {
          title: 'ChromaDB Overview',
          category: 'database',
          source: 'documentation',
        },
      },
      {
        content: 'Vector databases enable semantic search and similarity matching.',
        metadata: {
          title: 'Vector Search',
          category: 'technology',
          source: 'blog',
        },
      },
    ];

    // Index documents using the default configured collection
    await ai.index({
      indexer: chromaIndexerRef,
      documents,
    });

    // Or specify a specific collection
    const documentsIndexer = chromaIndexerRef({
      collectionName: 'my-documents',
    });

    await ai.index({
      indexer: documentsIndexer,
      documents,
    });
    ```
  </TabItem>
  <TabItem label="Go" icon="seti:go">
    Index documents for semantic search:

    ```go
    import (
        "context"
        "github.com/firebase/genkit/go/ai"
        "github.com/firebase/genkit/go/genkit"
    )

    func indexDocuments(ctx context.Context) error {
        documents := []ai.Document{
            {
                Content: "ChromaDB is an open-source vector database for AI applications.",
                Metadata: map[string]interface{}{
                    "title":    "ChromaDB Overview",
                    "category": "database",
                    "source":   "documentation",
                },
            },
            {
                Content: "Vector databases enable semantic search and similarity matching.",
                Metadata: map[string]interface{}{
                    "title":    "Vector Search",
                    "category": "technology",
                    "source":   "blog",
                },
            },
        }

        // Index documents
        err := genkit.Index(ctx, g,
            ai.WithIndexer("chromadb/my-documents"),
            ai.WithDocuments(documents),
        )
        if err != nil {
            return fmt.Errorf("failed to index documents: %w", err)
        }

        return nil
    }
    ```
  </TabItem>
  <TabItem label="Python" icon="seti:python">
    Index documents for semantic search:

    ```python
    from typing import List, Dict, Any

    # Prepare documents for indexing
    documents = [
        {
            "content": "ChromaDB is an open-source vector database for AI applications.",
            "metadata": {
                "title": "ChromaDB Overview",
                "category": "database",
                "source": "documentation",
            },
        },
        {
            "content": "Vector databases enable semantic search and similarity matching.",
            "metadata": {
                "title": "Vector Search",
                "category": "technology",
                "source": "blog",
            },
        },
    ]

    # Index documents
    async def index_documents(docs: List[Dict[str, Any]], collection_name: str = None):
        try:
            indexer = f"chromadb/{collection_name}" if collection_name else "chromadb/my-documents"
            
            await ai.index(
                indexer=indexer,
                documents=docs
            )
            
            return {"indexed": len(docs), "success": True}
        except Exception as error:
            print(f"Indexing failed: {error}")
            return {"indexed": 0, "success": False}
    ```
  </TabItem>
</Tabs>

### Document Retrieval

<Tabs syncKey="language">
  <TabItem label="JavaScript" icon="seti:javascript">
    Retrieve relevant documents using semantic search:

    ```ts
    import { chromaRetrieverRef } from 'genkitx-chromadb';

    // Basic retrieval
    const query = "What is a vector database?";
    const docs = await ai.retrieve({
      retriever: chromaRetrieverRef,
      query,
    });

    console.log('Retrieved documents:', docs);

    // Advanced retrieval with specific collection and options
    const documentsRetriever = chromaRetrieverRef({
      collectionName: 'my-documents',
    });

    const advancedDocs = await ai.retrieve({
      retriever: documentsRetriever,
      query,
      options: {
        k: 5, // Number of documents to retrieve
        where: {
          category: 'database', // Metadata filtering
        },
      },
    });
    ```
  </TabItem>
  <TabItem label="Go" icon="seti:go">
    Retrieve relevant documents using semantic search:

    ```go
    // Basic retrieval
    func retrieveDocuments(ctx context.Context, query string) ([]ai.Document, error) {
        docs, err := genkit.Retrieve(ctx, g,
            ai.WithRetriever("chromadb/my-documents"),
            ai.WithQuery(query),
        )
        if err != nil {
            return nil, fmt.Errorf("retrieval failed: %w", err)
        }

        return docs, nil
    }

    // Advanced retrieval with options
    func advancedRetrieve(ctx context.Context, query, collectionName string, limit int, filter map[string]interface{}) ([]ai.Document, error) {
        retriever := fmt.Sprintf("chromadb/%s", collectionName)
        
        docs, err := genkit.Retrieve(ctx, g,
            ai.WithRetriever(retriever),
            ai.WithQuery(query),
            ai.WithOptions(map[string]interface{}{
                "k":     limit,
                "where": filter,
            }),
        )
        if err != nil {
            return nil, fmt.Errorf("advanced retrieval failed: %w", err)
        }

        return docs, nil
    }
    ```
  </TabItem>
  <TabItem label="Python" icon="seti:python">
    Retrieve relevant documents using semantic search:

    ```python
    from typing import List, Dict, Any, Optional

    # Basic retrieval
    async def retrieve_documents(query: str, collection_name: str = "my-documents") -> List[Dict[str, Any]]:
        try:
            retriever = f"chromadb/{collection_name}"
            docs = await ai.retrieve(
                retriever=retriever,
                query=query
            )
            return docs
        except Exception as error:
            print(f"Retrieval failed: {error}")
            return []

    # Advanced retrieval with options
    async def advanced_retrieve(
        query: str,
        collection_name: str = "my-documents",
        limit: int = 5,
        filter_criteria: Optional[Dict[str, Any]] = None
    ) -> List[Dict[str, Any]]:
        try:
            retriever = f"chromadb/{collection_name}"
            
            options = {"k": limit}
            if filter_criteria:
                options["where"] = filter_criteria
            
            docs = await ai.retrieve(
                retriever=retriever,
                query=query,
                options=options
            )
            
            return docs
        except Exception as error:
            print(f"Advanced retrieval failed: {error}")
            return []
    ```
  </TabItem>
</Tabs>

## ChromaDB Server Setup

### Running ChromaDB Server

<Tabs syncKey="language">
  <TabItem label="JavaScript" icon="seti:javascript">
    Start a ChromaDB server for production use:

    ```bash
    # Install ChromaDB server
    pip install chromadb

    # Run the server
    chroma run --host 0.0.0.0 --port 8000
    ```

    Connect to the server in your application:

    ```ts
    const ai = genkit({
      plugins: [
        chroma([
          {
            collectionName: 'my-documents',
            embedder: googleAI.embedder('gemini-embedding-001'),
            clientParams: {
              path: 'http://your-chroma-server:8000',
            },
          },
        ]),
      ],
    });
    ```
  </TabItem>
  <TabItem label="Go" icon="seti:go">
    Connect to a ChromaDB server:

    ```go
    g, err := genkit.Init(ctx,
        genkit.WithPlugins(
            &chroma.ChromaDB{
                ServerURL: "http://your-chroma-server:8000",
                Collections: []chroma.CollectionConfig{
                    {
                        Name:     "my-documents",
                        Embedder: "googleai/gemini-embedding-001",
                    },
                },
            },
        ),
    )
    ```
  </TabItem>
  <TabItem label="Python" icon="seti:python">
    Connect to a ChromaDB server:

    ```python
    ai = Genkit(
        plugins=[
            ChromaDB(
                server_url="http://your-chroma-server:8000",
                collections=[
                    {
                        "name": "my-documents",
                        "embedder": "googleai/gemini-embedding-001",
                    }
                ],
            ),
        ],
    )
    ```
  </TabItem>
</Tabs>

## Advanced Features

### Metadata Filtering

<Tabs syncKey="language">
  <TabItem label="JavaScript" icon="seti:javascript">
    Use metadata filtering for precise retrieval:

    ```ts
    // Category-based filtering
    const techDocs = await ai.retrieve({
      retriever: chromaRetrieverRef,
      query: "database concepts",
      options: {
        k: 5,
        where: {
          category: 'technology',
        },
      },
    });

    // Complex filtering with multiple conditions
    const complexFilter = await ai.retrieve({
      retriever: chromaRetrieverRef,
      query: "AI applications",
      options: {
        k: 10,
        where: {
          $and: [
            { category: { $in: ['technology', 'database'] } },
            { source: 'documentation' },
          ],
        },
      },
    });
    ```
  </TabItem>
  <TabItem label="Go" icon="seti:go">
    Use metadata filtering for precise retrieval:

    ```go
    // Category-based filtering
    func retrieveByCategory(ctx context.Context, query, category string) ([]ai.Document, error) {
        docs, err := genkit.Retrieve(ctx, g,
            ai.WithRetriever("chromadb/my-documents"),
            ai.WithQuery(query),
            ai.WithOptions(map[string]interface{}{
                "k": 5,
                "where": map[string]interface{}{
                    "category": category,
                },
            }),
        )
        if err != nil {
            return nil, fmt.Errorf("category filtering failed: %w", err)
        }
        return docs, nil
    }
    ```
  </TabItem>
  <TabItem label="Python" icon="seti:python">
    Use metadata filtering for precise retrieval:

    ```python
    # Category-based filtering
    async def retrieve_by_category(query: str, category: str, limit: int = 5) -> List[Dict[str, Any]]:
        try:
            docs = await ai.retrieve(
                retriever="chromadb/my-documents",
                query=query,
                options={
                    "k": limit,
                    "where": {"category": category}
                }
            )
            return docs
        except Exception as error:
            print(f"Category filtering failed: {error}")
            return []
    ```
  </TabItem>
</Tabs>

## Best Practices

### Collection Management

1. **Use descriptive collection names**: Choose names that reflect the content type
2. **Organize by domain**: Separate collections for different data types or domains
3. **Consider collection size**: Balance between too many small collections and few large ones
4. **Plan for scaling**: Design collection structure for future growth

### Performance Optimization

1. **Batch operations**: Index documents in batches for better performance
2. **Optimize embeddings**: Choose appropriate embedding models for your use case
3. **Use metadata filtering**: Combine semantic search with metadata filters
4. **Monitor memory usage**: ChromaDB loads collections into memory

### Production Deployment

1. **Use persistent storage**: Configure ChromaDB with persistent storage
2. **Set up monitoring**: Monitor collection sizes and query performance
3. **Backup collections**: Implement regular backup strategies
4. **Scale horizontally**: Consider distributed deployment for large datasets

## Next Steps

- Learn about [RAG implementation](/unified-docs/rag) to build complete retrieval-augmented generation systems
- Explore [creating flows](/unified-docs/creating-flows) to build structured AI workflows with vector search
- See [deployment guides](/unified-docs/deployment) for production deployment strategies
- Check out other vector database options for different use cases
