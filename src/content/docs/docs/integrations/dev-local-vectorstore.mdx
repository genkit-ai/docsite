---
title: Dev Local Vector Store
description: Learn how to use the Dev Local Vector Store for local development and testing across JavaScript, Go, and Python with Genkit.
---

import LanguageSelector from '../../../../components/LanguageSelector.astro';
import CopyMarkdownButton from '../../../../components/CopyMarkdownButton.astro';
import LanguageContent from '../../../../components/LanguageContent.astro';

<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin: 1rem 0 1rem 0;">
  <LanguageSelector />
  <CopyMarkdownButton />
</div>

<LanguageContent lang="python">

The Dev Local Vector Store plugin provides a local, file-based vector store for development and testing purposes. It is not intended for production use.

## Installation

```bash
pip3 install genkit-plugin-dev-local-vectorstore
```

## Configuration

To use this plugin, specify it when you initialize Genkit:

```python
from genkit.ai import Genkit
from genkit.plugins.dev_local_vectorstore import DevLocalVectorStore
from genkit.plugins.google_genai import VertexAI # Assuming VertexAI is used for embedder

ai = Genkit(
    plugins=[
        VertexAI(), # Ensure the embedder's plugin is loaded
        DevLocalVectorStore(
            name='my_vectorstore',
            embedder='vertexai/text-embedding-004', # Example embedder
        ),
    ],
    # Define a default model if needed
    # model='vertexai/gemini-1.5-flash',
)
```

### Configuration Options

- **name** (str): A unique name for this vector store instance. This is used as the `retriever` argument to `ai.retrieve`.
- **embedder** (str): The name of the embedding model to use. Must match a configured embedder in your Genkit project.
- **embedder_options** (dict, optional): Options to pass to the embedder.

## Usage

### Indexing Documents

The Dev Local Vector Store automatically creates indexes. To populate with data you must call the static method `.index(name, documents)`:

```python
from genkit.ai import Genkit
from genkit.plugins.dev_local_vectorstore import DevLocalVectorStore
from genkit.plugins.google_genai import VertexAI # Assuming VertexAI is used for embedder
from genkit.types import Document

# Assuming 'ai' is configured as shown in the Configuration section
# ai = Genkit(...)

data_list = [
    'This is the first document.',
    'This is the second document.',
    'This is the third document.',
    "This is the fourth document.",
]

genkit_docs = [Document.from_text(text=item) for item in data_list]
# Ensure the vector store name matches the one in the Genkit config
await DevLocalVectorStore.index('my_vectorstore', genkit_docs)
```

### Retrieving Documents

Use `ai.retrieve` and pass the store name configured in the DevLocalVectorStore constructor.

```python
from genkit.types import Document
# Assuming 'ai' is configured as shown in the Configuration section
# ai = Genkit(...)

docs = await ai.retrieve(
    query=Document.from_text('search query'),
    retriever='my_vectorstore', # Matches the 'name' in DevLocalVectorStore config
)
# print(docs) # Process the retrieved documents
```

</LanguageContent>

<LanguageContent lang="go">

The Dev Local Vector Store provides a local, file-based vector store for development and testing purposes. It is not intended for production use.

## Installation

The local vector store functionality is built into Genkit Go. You need to import the [`localvec`](https://pkg.go.dev/github.com/firebase/genkit/go/plugins/localvec) package:

```go
import "github.com/firebase/genkit/go/plugins/localvec"
```

## Configuration

To use the local vector store, initialize it and define a retriever with an embedder:

```go
import (
	"context"
	"log"

	"github.com/firebase/genkit/go/ai"
	"github.com/firebase/genkit/go/genkit"
	"github.com/firebase/genkit/go/plugins/googlegenai"
	"github.com/firebase/genkit/go/plugins/localvec"
)

ctx := context.Background()

g := genkit.Init(ctx, genkit.WithPlugins(&googlegenai.VertexAI{}))

if err := localvec.Init(); err != nil {
	log.Fatal(err)
}

_, myRetriever, err := localvec.DefineRetriever(
	g, "my_vectorstore", localvec.Config{
		Embedder: googlegenai.VertexAIEmbedder(g, "text-embedding-004"),
	},
)
if err != nil {
	log.Fatal(err)
}
```

### Configuration Options

- **name** (string): A unique name for this vector store instance. This is used as the retriever reference.
- **Embedder** ([`ai.Embedder`](https://pkg.go.dev/github.com/firebase/genkit/go/ai#Embedder)): The embedding model to use. Must be a configured embedder in your Genkit project.

## Usage

### Indexing Documents

The Dev Local Vector Store automatically creates indexes. To populate with data, you need to implement your own indexing logic using the [`ai.Document`](https://pkg.go.dev/github.com/firebase/genkit/go/ai#Document) format:

```go
import (
    "github.com/firebase/genkit/go/ai"
)

// Create documents from text
data := []string{
    "This is the first document.",
    "This is the second document.",
    "This is the third document.",
    "This is the fourth document.",
}

var docs []*ai.Document
for _, text := range data {
	docs = append(docs, ai.DocumentFromText(text, nil))
}

// You would implement your own indexing logic here
// The local vector store handles the embedding and storage internally
```

### Retrieving Documents

Use [`ai.Retrieve`](https://pkg.go.dev/github.com/firebase/genkit/go/ai#Retrieve) with the retriever you defined:

```go
// Retrieve documents relevant to a query
resp, err := ai.Retrieve(ctx, myRetriever, ai.WithTextDocs("search query"))
if err != nil {
	log.Fatal(err)
}

// Process the retrieved documents
for _, doc := range resp.Documents {
	fmt.Println(doc.Content)
}
```

</LanguageContent>

<LanguageContent lang="js">

The Dev Local Vector Store plugin provides a local, file-based vector store for development and testing purposes. It is not intended for production use.

## Installation

```bash
npm install @genkit-ai/dev-local-vectorstore
```

## Configuration

To use this plugin, specify it when you initialize Genkit:

```ts
import { devLocalVectorstore } from '@genkit-ai/dev-local-vectorstore';
import { googleAI } from '@genkit-ai/google-genai';
import { genkit } from 'genkit';

const ai = genkit({
  plugins: [
    // googleAI provides the embedding models
    googleAI(),
    
    // Configure the local vector store with an embedder
    devLocalVectorstore([
      {
        indexName: 'my_vectorstore',
        embedder: googleAI.embedder('gemini-embedding-001'),
      },
    ]),
  ],
});
```

### Configuration Options

- **indexName** (string): A unique name for this vector store instance. This is used as the indexer and retriever reference.
- **embedder** (EmbedderReference): The embedding model to use. Must be a configured embedder in your Genkit project.

## Usage

### Indexing Documents

The Dev Local Vector Store automatically creates indexes. To populate with data, use the indexer reference and `ai.index`:

```ts
import { devLocalIndexerRef } from '@genkit-ai/dev-local-vectorstore';
import { Document } from 'genkit/retriever';

// Create the indexer reference
const myIndexer = devLocalIndexerRef('my_vectorstore');

// Create documents from text
const data = [
  'This is the first document.',
  'This is the second document.',
  'This is the third document.',
  'This is the fourth document.',
];

const documents = data.map((text) => Document.fromText(text));

// Index the documents
await ai.index({
  indexer: myIndexer,
  documents,
});
```

### Retrieving Documents

Use `ai.retrieve` with the retriever reference:

```ts
import { devLocalRetrieverRef } from '@genkit-ai/dev-local-vectorstore';

// Create the retriever reference
const myRetriever = devLocalRetrieverRef('my_vectorstore');

// Retrieve documents relevant to a query
const docs = await ai.retrieve({
  retriever: myRetriever,
  query: 'search query',
  options: { k: 3 }, // Return top 3 results
});

// Process the retrieved documents
docs.forEach(doc => {
  console.log(doc.content);
});
```

</LanguageContent>
