---
title: Anthropic Plugin
description: Learn how to configure and use Genkit Anthropic plugin to access Claude models in Go.
---

import LanguageSelector from '../../../../components/LanguageSelector.astro';
import CopyMarkdownButton from '../../../../components/CopyMarkdownButton.astro';
import LanguageContent from '../../../../components/LanguageContent.astro';

<div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; margin: 1rem 0 1rem 0;">
  <LanguageSelector supportedLanguages="go" />
  <CopyMarkdownButton />
</div>

<LanguageContent lang="js">
  :::note[Feature unavailable for JavaScript]
The Anthropic plugin has not yet been made available for JavaScript.
:::
</LanguageContent>

<LanguageContent lang="python">
  :::note[Feature unavailable for Python]
The Anthropic plugin has not yet been made available for Python.
:::
</LanguageContent>

<LanguageContent lang="go">

The Anthropic plugin provides access to Claude models through the official [Anthropic Go SDK](https://github.com/anthropics/anthropic-sdk-go).

## Configuration

To use this plugin, import the `anthropic` package and pass `anthropic.Anthropic` to `WithPlugins` in the Genkit initializer

```go
import "github.com/firebase/genkit/go/plugins/anthropic"

// Anthropic plugin will look for ANTHROPIC_API_KEY environment variable
g := genkit.Init(context.Background(), genkit.WithPlugins(&anthropic.Anthropic{}))
```

You must provide an API key from Anthropic. You can get an API key from the [Anthropic Console](https://console.anthropic.com/).

Configure the plugin to use your API key by doing one of the following:
- Set the `ANTHROPIC_API_KEY` environment variable to your API key.
- Specify the API key when you initialize the plugin

```go
genkit.WithPlugins(&anthropic.Anthropic{APIKey: "YOUR_API_KEY"})
```

However, don't embed your API key directly in code! Use this feature only in conjunction with a service like Cloud Secret Manager or similar.

## Supported Models

Anthropic models should be supported as soon as they are available in the official Anthropic SDK.

For more information about the currently supported models, take a look at the [Anthropic docs](https://platform.claude.com/docs/en/about-claude/models/overview)

## Usage Example

```go
import (
    "github.com/firebase/genkit/go/plugins/compat_oai/anthropic"
    "github.com/openai/openai-go/option"
)

// Initialize Anthropic plugin
claude := &anthropic.Anthropic{
    Opts: []option.RequestOption{
        option.WithAPIKey("YOUR_ANTHROPIC_API_KEY"),
    },
}
g := genkit.Init(ctx, genkit.WithPlugins(claude))

// Use Claude for tasks requiring reasoning
model := claude.Model(g, "claude-3-7-sonnet-20250219")
resp, err := genkit.Generate(ctx, g,
    ai.WithModel(model),
    ai.WithPrompt("Analyze this complex problem step by step."),
)
```

## Using Multiple Providers

You can use both OpenAI and Anthropic providers in the same application:

```go
import (
    "github.com/firebase/genkit/go/plugins/compat_oai/openai"
    "github.com/firebase/genkit/go/plugins/compat_oai/anthropic"
)

oai := &openai.OpenAI{APIKey: "YOUR_OPENAI_KEY"}
claude := &anthropic.Anthropic{
    Opts: []option.RequestOption{
        option.WithAPIKey("YOUR_ANTHROPIC_KEY"),
    },
}

g := genkit.Init(ctx, genkit.WithPlugins(oai, claude))

// Use OpenAI for embeddings and tool-heavy tasks
openaiModel := oai.Model(g, "gpt-4o")
embedder := oai.Embedder(g, "text-embedding-3-large")

// Use Anthropic for reasoning and analysis
claudeModel := claude.Model(g, "claude-3-7-sonnet-20250219")
```

## Advanced Features

### Multimodal Support

Claude models support vision capabilities:

```go
// Works with Claude models
resp, err := genkit.Generate(ctx, g,
    ai.WithModel(model),
    ai.WithMessages(
        ai.NewUserMessage(
            ai.NewTextPart("What do you see in this image?"),
            ai.NewMediaPart("image/jpeg", imageData),
        ),
    ),
)
```

### Streaming

Claude models support streaming responses:

```go
resp, err := genkit.Generate(ctx, g,
    ai.WithModel(model),
    ai.WithPrompt("Write a long explanation."),
    ai.WithStreaming(func(ctx context.Context, chunk *ai.ModelResponseChunk) error {
        for _, content := range chunk.Content {
            fmt.Print(content.Text)
        }
        return nil
    }),
)
```

### Configuration

Anthropic models support OpenAI-compatible configuration:

```go
import "github.com/openai/openai-go"

config := &openai.ChatCompletionNewParams{
    Temperature:     openai.Float(0.7),
    MaxOutputTokens: openai.Int(1000),
    TopP:            openai.Float(0.9),
}

resp, err := genkit.Generate(ctx, g,
    ai.WithModel(model),
    ai.WithPrompt("Your prompt here"),
    ai.WithConfig(config),
)
```

:::note
Tools are not supported on Claude models via the OpenAI-compatible API.
:::

</LanguageContent>
