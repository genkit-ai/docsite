---
export interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;
---

<button 
  id="copy-markdown-btn"
  class={`copy-markdown-button ${className}`}
  type="button"
  aria-label="Copy page content as markdown for selected language"
  title="Copy as Markdown"
>
  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
    <path d="m4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
  </svg>
  <span class="button-text">Copy as Markdown</span>
  <span class="success-text" style="display: none;">Copied!</span>
</button>

<style>
  .copy-markdown-button {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    border: 1px solid var(--sl-color-gray-4);
    border-radius: 0.5rem;
    background: var(--sl-color-bg);
    color: var(--sl-color-text);
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.875rem;
    font-weight: 400;
    font-family: inherit;
    white-space: nowrap;
    height: 2.25rem;
    box-sizing: border-box;
  }

  .copy-markdown-button:hover {
    border-color: var(--sl-color-accent);
    background: var(--sl-color-gray-6);
  }

  .copy-markdown-button:active {
    transform: translateY(1px);
  }

  .copy-markdown-button.copying {
    border-color: var(--sl-color-accent);
    background: var(--sl-color-accent);
    color: var(--sl-color-white);
  }

  .copy-markdown-button svg {
    flex-shrink: 0;
  }

  @media (max-width: 50rem) {
    .copy-markdown-button .button-text {
      display: none;
    }
    
    .copy-markdown-button {
      padding: 0.5rem;
      min-width: 2.5rem;
      justify-content: center;
    }
  }
</style>

<script>
  // Import the markdown copy functionality
  import '../scripts/markdown-copy.js';
</script>
