---
// src/components/LangTabs.astro
---
<div class="lang-tabs" role="tablist">
  <slot />
</div>

<script>
    function updateTabVisibility(lang: string) {
        document.querySelectorAll('.lang-tab-item').forEach(item => {
            const tab = item as HTMLElement;
            if (tab.dataset.lang === lang) {
                tab.style.display = 'block';
            } else {
                tab.style.display = 'none';
            }
        });
    }

    function initializeTabs() {
        if (window.languagePreferenceEnhancer) {
            const currentLang = window.languagePreferenceEnhancer.getCurrentLanguage();
            updateTabVisibility(currentLang);
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        initializeTabs();
        window.addEventListener('language-preference-changed', (e) => {
            updateTabVisibility((e as CustomEvent).detail.language);
        });
    });

    // In case the script runs after DOMContentLoaded
    if (document.readyState !== 'loading') {
        initializeTabs();
    }
</script>
