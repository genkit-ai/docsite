---

interface StepItem {
  number: number;
  title: string;
  description: string;
  icon?: string; // SVG string
}

interface Props {
  /**
   * Array of step items
   */
  steps: readonly StepItem[];
  
  /**
   * Additional CSS classes
   */
  class?: string;
}

const { 
  steps,
  class: className = '' 
} = Astro.props;

// Responsive utility classes
const responsive = {
  // Container
  container: 'space-y-3 sm:space-y-4 sm:pt-4',
  
  // Step layout
  step: 'grid grid-cols-[auto_1fr] gap-3 sm:gap-2 mb-4 sm:mb-6',
  
  // Content spacing
  content: 'space-y-1 sm:space-y-2'
};

// Base classes
const containerClasses = [
  responsive.container,
  className
].filter(Boolean).join(' ');

const stepClasses = responsive.step;
const bubbleClasses = 'step-bubble';
---

<div class={containerClasses}>
  {steps.map((step) => (
    <div class={stepClasses}>
      <!-- Step Number Bubble -->
      <div class={bubbleClasses}>
        {step.icon ? (
          <div set:html={step.icon} />
        ) : (
          <span>{step.number}</span>
        )}
      </div>
      
      <!-- Step Title -->
      <h3 class="step-title mb-0 text-base sm:text-lg">
        {step.title}
      </h3>
      
      <!-- Step Description - spans full width -->
      <p class="text-xs sm:text-sm text-muted step-description leading-relaxed">
        {step.description}
      </p>
    </div>
  ))}
</div>

<style>
.step-bubble {
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 9999px;
  color: white;
  flex-shrink: 0;
  border: 0.5px solid #FFFFFF;
  background: linear-gradient(to right, rgba(255,255,255,0.12) 75%, #1f2937);
  align-self: start;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  
  /* Mobile styles */
  width: 1.25rem; /* 20px */
  height: 1.25rem; /* 20px */
  font-size: 0.625rem; /* 10px */
  font-weight: 300;
  margin-top: 0.125rem;
}

/* Desktop styles */
@media (min-width: 640px) {
  .step-bubble {
    width: 1.5rem; /* 24px */
    height: 1.5rem; /* 24px */
    font-size: 0.75rem; /* 12px */
    font-weight: 200;
    margin-top: 0.125rem;
  }
}

.step-title {
  line-height: 1.25;
  color: #C6D2FF;
  font-family: 'Google Sans', Arial, sans-serif;
  /* Font size now handled by responsive classes in component */
}

.step-description {
  /* Align description text with the left edge of the circle using grid positioning */
  grid-column: 1 / -1;
  margin-top: 0.125rem;
  margin-bottom: 0;
}

.step-description:last-child {
  margin-bottom: 0;
}
</style>
